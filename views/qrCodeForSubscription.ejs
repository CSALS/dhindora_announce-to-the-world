<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Substack for India</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap" rel="stylesheet">
        <style>
            * {
                font-family: 'Sora', sans-serif;
                text-align: center;
            }

            .button {
                background-color: #555555;
                border: 1px solid black;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
                margin: 4px 2px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <div class="myDiv" style="float:top;">
            <h1>Substack for India</h1>
        </div>
        <hr>

        <div style="margin-top:5%;margin-bottom:5%">
            <div>
                <h2>Share this QR code with your audience <br> so that they can subscribe to your profile</h2>
            </div>
            <br>
            <div id="qrcode" style="display: inline-block; vertical-align: top;"></div>
            <br>
            <br>
            <br>
            <button id="qrcode-download" class="button">Download QR Code</button>
        </div>

        <div style="position:fixed;width:100%;bottom:0;padding-bottom:25px;font-size:120%;">
            <hr>
            <text>Project by Team Jordans</text>
        </div>
    </body>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js" type="text/javascript"></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script type="text/javascript">
        const number = "<%- twilioBotNumber %>"
        const message = "<%- registerMessage %>"
        new QRCode(document.getElementById("qrcode"), `https://api.whatsapp.com/send?phone=${number}&text=${message}`)

        document.getElementById("qrcode-download").addEventListener("click", function() {
            html2canvas(document.getElementById("qrcode")).then(function (canvas) {
                var anchorTag = document.createElement("a");
                document.body.appendChild(anchorTag);
                anchorTag.download = "your-qr-code.jpg";
                anchorTag.href = canvas.toDataURL();
                anchorTag.target = '_blank';
                anchorTag.click();
            });
        });
    </script>

</html>
